<div class="materialize-card">
	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab asperiores atque consequuntur esse excepturi, harum in, inventore ipsum minima obcaecati pariatur, possimus quis quo rerum saepe sint suscipit ullam voluptates.</p>
	<table class="materialize-table highlight">
		<thead>
			<tr>
				<th style="width: 50px;">
					<label>
						<input type="checkbox" id="main-table-checkbox" class="filled-in">
						<span></span>
					</label>
				</th>
				<th class="center" style="width: 80px;">{{ column_image }}</th>
				<th style="width: 300px;">{{ column_post }}</th>
				<th>{{ column_author }}</th>
				<th>{{ column_category }}</th>
				<th>{{ column_comment }}</th>
				<th>{{ column_data }}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{% if posts %}
				{% for post in posts %}
					<tr>
						<td>
							<label>
								<input type="checkbox" name="selected[]" value="{{ post.post_id }}" class="filled-in">
								<span></span>
							</label>
						</td>
						<td class="center"><img src="{{ placeholder }}" alt="{{ post.name }}" class="img-thumbnail"></td>
						<td>
							<a href="#!" class="grey-text text-darken-4 title">{{ post.name }}</a>
							{% if post.status == 0 %}
								<span class="materialize-badge blue-grey lighten-1 mt-2">{{ text_draft }}</span>
							{% elseif post.status == 1 %}
								<span class="materialize-badge green mt-2">{{ text_published }}</span>
							{% else %}
								<span class="materialize-badge orange mt-2">{{ text_pending_review }}</span>
							{% endif %}
						</td>
						<td>{{ post.author }}</td>
						<td>Category</td>
						<td>3</td>
						<td>{{ post.date_added }}</td>
						<td>
							<a class="btn-floating btn-flat waves-effect"><i class="material-icons grey-text text-darken-4">mode_edit</i></a>
						</td>
					</tr>
				{% endfor %}
			{% endif %}
		</tbody>
	</table>
	<div class="materialize-card-action">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo, nulla, sequi. Enim facilis ipsum molestias nulla odio qui velit voluptas, voluptate! A blanditiis magnam nesciunt odio repudiandae sint veniam voluptatum.</p>
	</div>
</div>
<script>
	let tableRows = $('table tbody tr'),
		mainTableCheckbox = $('#main-table-checkbox'),
		tableCheckboxes = $('tbody td input[type=\'checkbox\']');

	mainTableCheckbox.on('click', function() {
		mainTableCheckbox.addClass('filled-in');

		if (mainTableCheckbox.prop('checked')) {
			tableCheckboxes.prop('checked', true);
			tableRows.addClass('active');
		} else {
			tableCheckboxes.prop('checked', false);
			tableRows.removeClass('active');
		}
	});

	tableCheckboxes.change(function() {
		let allCheckboxChecked = [],
			oneCheckboxChecked = false;

		tableCheckboxes.each(function(index, element) {
			if ($(element).prop('checked')) {
				oneCheckboxChecked = true;
				allCheckboxChecked.push(true);
				$(element).parent().parent().parent().addClass('active');
			} else {
				$(element).parent().parent().parent().removeClass('active');
			}
		});

		if (allCheckboxChecked.length === tableCheckboxes.length) {
			mainTableCheckbox.addClass('filled-in').prop({
				'checked': true,
				'indeterminate': false
			});
		} else if (oneCheckboxChecked) {
			mainTableCheckbox.prop({
				'checked': false,
				'indeterminate': true
			}).removeClass('filled-in');
		} else if (allCheckboxChecked.length === 0) {
			mainTableCheckbox.addClass('filled-in').prop({
				'checked': false,
				'indeterminate': false
			});
		} else {
			mainTableCheckbox.addClass('filled-in').prop({
				'checked': true,
				'indeterminate': false
			});
		}
	});
</script>